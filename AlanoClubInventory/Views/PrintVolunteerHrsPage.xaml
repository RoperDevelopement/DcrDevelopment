<Page x:Class="AlanoClubInventory.Views.PrintVolunteerHrsPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AlanoClubInventory.Views"
        mc:Ignorable="d"
        xmlns:vm="clr-namespace:AlanoClubInventory.Utilites" 
        Title="Print-Lookup-Edit Volunteer Hrs" Height="450" Width="800"
        Background="{StaticResource ControlFillColorDefault}"
      VerticalAlignment="Top">
    

        <DockPanel LastChildFill="True">
            <Grid HorizontalAlignment="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <!-- Title -->
                    <RowDefinition Height="Auto"/>
                    <!-- Main content -->
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>

                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Fits the text -->
                    <ColumnDefinition Width="*"/>
                    <!-- Fills remaining space -->
                </Grid.ColumnDefinitions>


                <TextBlock Grid.Row="0" Margin="5" TextWrapping="Wrap" Text="Print-Lookup-Edit Volunteer Hrs" 
                        HorizontalAlignment="Center"  FontSize="14" VerticalAlignment="Top"/>

                <ComboBox  Grid.Row="1" ItemsSource="{Binding ItemsVol}"
                    SelectedItem="{Binding SelectedItem, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Cursor="Hand" HorizontalAlignment="Center" VerticalAlignment="Center" IsTextSearchCaseSensitive="False" Width="250" Margin="10" IsTextSearchEnabled="True">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Label}" FontSize="12" Margin="5" Width="200" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </StackPanel>


                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Select Start Date:" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="8"/>
                    <DatePicker x:Name="StartDatePicker" Margin="4" 
                                                    SelectedDate="{Binding SDate, StringFormat=MM-dd-yyyy}" HorizontalAlignment="Center"
                    DisplayDateStart="2025-01-01" 
                    DisplayDateEnd="2099-12-31"
                    IsTodayHighlighted="True"
                    FirstDayOfWeek="Monday"
                    Background="Lavender"
BorderBrush="SlateBlue"
BorderThickness="2" />
                </StackPanel>
                <StackPanel Grid.Row="3" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">

                    <TextBlock Text="Select End Date:" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,13,0"/>
                    <DatePicker x:Name="EndDatePicker" 
                                                    SelectedDate="{Binding EDate, StringFormat=MM-dd-yyyy}" Width="125"
                    DisplayDateStart="2025-01-01" 
                    DisplayDateEnd="2099-12-31"
                    IsTodayHighlighted="True"
                    FirstDayOfWeek="Monday"
                    Background="Lavender"
BorderBrush="SlateBlue"
BorderThickness="2"
                            HorizontalAlignment="Center"
                               />
                </StackPanel>

                <DataGrid Grid.Row="{Binding DataGridRowHrs}" x:Name="dataGrid"  AutoGenerateColumns="False" HorizontalAlignment="Center"  VerticalAlignment="Center" 
         ItemsSource="{Binding VolunteerHours}" Margin="24,17,0,0" SelectedItem="{Binding SelectedVol, Mode=TwoWay}"  
         SelectionChanged="dataGrid_SelectionChanged" 
         GridLinesVisibility="All" SelectionUnit="FullRow"  IsReadOnly="False" CanUserAddRows="True" CanUserSortColumns="True" Padding="10" CanUserDeleteRows="False"  SelectionMode="Extended"  LostFocus="dataGrid_LostFocus"  
                          ScrollViewer.CanContentScroll="True" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible"
                          Visibility="{Binding IsViewing, Converter={StaticResource BoolToVisibilityConverter}}">
                    <DataGrid.Resources>
                        <Style TargetType="DataGridRow">
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="LightGoldenrodYellow"/>
                                    <Setter Property="Foreground" Value="Black"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.Resources>
                    <DataGrid.RowStyleSelector>
                        <StyleSelector/>

                    </DataGrid.RowStyleSelector>
                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Padding" Value="10"/>
                            <Setter Property="Margin" Value="10"/>
                        </Style>
                    </DataGrid.CellStyle>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="id" Binding="{Binding ID}" Visibility="Hidden" Width="SizeToCells"/>
                    <DataGridTextColumn Header="UserName" Binding="{Binding UserName}"  Width="SizeToCells" IsReadOnly="False" />
                    <DataGridTextColumn Header="First Name" Binding="{Binding UserFirstName}"  Width="SizeToCells" IsReadOnly="True" />


                    <DataGridTextColumn Header="Last Name" Binding="{Binding UserLastName}"  Width="SizeToCells" IsReadOnly="True"/>
                        <!--
                            <DataGridTextColumn Header="Phone Number" Binding="{Binding UserPhoneNumber}"  Width="SizeToCells"/>
                            <DataGridTextColumn Header="Email Address" Binding="{Binding UserEmailAddress}"  Width="SizeToCells"/>
                            -->
                        <DataGridTextColumn Header="In" Binding="{Binding DateTimeClockedIn, StringFormat=\{0:MM/dd/yyyy HH:mm:ss\}}"
                                                Width="SizeToCells"/>
                        <DataGridTextColumn Header="Out" Binding="{Binding DateTimeClockedOut, StringFormat=\{0:MM/dd/yyyy HH:mm:ss\}}" 
                                                Width="SizeToCells"/>

                        <DataGridTextColumn Header="Hours" Binding="{Binding TotalHours}"  Width="SizeToCells" IsReadOnly="True"/>
                        <DataGridTemplateColumn Width="SizeToCells" Header="UpDate">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Update" Background="LightYellow"
                           Command="{Binding DataContext.UpDateVolHrs,RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                   CommandParameter="{Binding ElementName=dataGrid}"  Foreground="Black"  BorderBrush="DarkBlue"  BorderThickness="2"
       Cursor="Hand"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Width="SizeToCells" Header="Delete">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Delete" Background="Red"
                  Command="{Binding DataContext.DelVolHrs,RelativeSource={RelativeSource AncestorType=DataGrid}}"
CommandParameter="{Binding ElementName=dataGrid}"  Foreground="Black"  BorderBrush="DarkBlue"  BorderThickness="2"
       Cursor="Hand"/>


                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="{Binding ButtonDataGridRow}" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5">
                    <Button Content="Get VolHrs" Background="LightYellow"
Command="{Binding GetVolHrs}"  Foreground="Black" BorderBrush="DarkBlue"  BorderThickness="2"
 Cursor="Hand" Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center"   x:Name="BtnAdding"
                        Width="100"/>
                <Button Content="Print" Background="DarkGray" Visibility="{Binding IsViewing, Converter={StaticResource BoolToVisibilityConverter}}"
Click="BtnClickPrint"  Foreground="Black" BorderBrush="DarkBlue"  BorderThickness="2"
 Cursor="Hand" Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center"  Width="100"/>
                <Button Content="Exit" Background="Red"
Command="{Binding Exit}"  Foreground="Black" BorderBrush="DarkBlue"  BorderThickness="2"
 Cursor="Hand" Margin="5" VerticalAlignment="Center" HorizontalAlignment="Center" Click="Button_Click" Width="100"/>
                
            </StackPanel>
            <Expander Grid.Row="0" Header="Vol Total Hrs" Visibility="{Binding IsViewing, Converter={StaticResource BoolToVisibilityConverter}}"
                       ExpandDirection="Down"
          HorizontalAlignment="Stretch"  VerticalAlignment="Top">
            <ListView ItemsSource="{Binding VolunteerTotalHours}" Margin="5" HorizontalAlignment="Left" Width="600">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="User Name">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding UserName}" TextWrapping="Wrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Name">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0} {1}">
                                                    <Binding Path="UserFirstName"/>
                                                    <Binding Path="UserLastName"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                           

                            <GridViewColumn Header="Email">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding UserEmailAddress}" TextWrapping="Wrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <GridViewColumn Header="Phone Number">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding UserPhoneNumber}" TextWrapping="Wrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                            <GridViewColumn Header="Vol Date Range">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0}-{1}">
                                                    <Binding Path="DateTimeClockedIn"/>
                                                    <Binding Path="DateTimeClockedOut"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                       
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Total Hrs">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding TotalHours}" TextWrapping="Wrap" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                        </GridView>
                    </ListView.View>

                </ListView>
            </Expander>
        </Grid>
        
    </DockPanel>
    
</Page>
<!--
<DataGridTextColumn.HeaderTemplate>
<DataTemplate>
    <TextBlock Text="First Name" Width="100" TextWrapping="Wrap" Margin="4"/>
</DataTemplate>
</DataGridTextColumn.HeaderTemplate>
-->
<!--
<DataGridTemplateColumn Header="Bar Item">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding BarItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn>
-->