@page
@model BinMonitorAppService.Pages.LookUp.SpecMonitorDelLabReqsRepModel
@{
    ViewData["Title"] = "Deleted LabReqs Report";
    Layout = "~/Pages/Shared/_Layout_BinMonitor.cshtml";
}
<div id="headingSessionExp" style="display:none">
    <h3 class="text-center text-danger">Page BinMonitor Report will refresh in&nbsp;<span id="seconds"></span>&nbsp;seconds.<br /></h3>
</div>
<div class="container-fluid small" style="background-color:#ffffff">

    <p class="p-2" />
    <header>
        <h3 class="text-center">Report For Deleted LabReq's' Range @Model.UsageRepStDate.ToString("MM-dd-yyyy") - @Model.UsageRepEndDate.ToString("MM-dd-yyyy")</h3>
    </header>
    <p class="p-0"></p>
    <form method="get" id="fmDelLabReqsRep" name="fmUsgRep">
        <div class="form-group text-center">
            <div class="row" style="display:table;margin:auto">

                <div class="col">
                    @Html.LabelFor(model => Model.UsageRepStDate, new { @class = "text-left" })
                    @Html.EditorFor(m => Model.UsageRepStDate, new { @name = "UsageRepStDate", @id = "UsageRepStDate" })
                </div>
                <p class="p-0"></p>
                <div class="col">
                    <p asp-for="UsageRepStDate">
                        @Html.LabelFor(model => Model.UsageRepEndDate, new { @class = "text-left" })
                        @Html.EditorFor(m => @Model.UsageRepEndDate, new { @name = "UsageRepEndDate", @id = "UsageRepEndDate" })
                    </p>
                </div>
                <p class="p-0"></p>

                <p class="p-0"></p>
            </div>
        </div>
    </form>

    <div class="text-center">

        <button class="btn btn-outline-primary " id="subcrbatch" name="subcrbatch">Generate Report</button>
        <a href="https://edocsnypbinmonitor.azurewebsites.net/LookUp/DeletedLabReqsView"><input type="button" value="Reset" class="btn btn-outline-warning" id="reset"></a>
        <a href="https://edocsnypbinmonitor.azurewebsites.net/BinManager/ViewManagerHome"><input type="button" value="Exit" id="exitcrb" class="btn btn-outline-dark"></a>
    </div>
    <p class="p-1"></p>
    @if ((Model.DelLabReqs != null) && (Model.DelLabReqs.Count > 0))
    {



        <table class="table-bordered table-hover  table-info" style="margin:auto" width="50%">

            <thead>
                <tr class="flex-nowrap">
                    <th>Bin ID</th>
                    <th>LabReq#</th>
                    <th>Category Name</th>
                    <th>Reg Created By</th>
                    <th>Reg Deleted By</th>
                    <th>Reg Assigned To</th>
                    <th>Reg Assigned By</th>
                    <th>Reg Completed By</th>
                    <th>Reg Started At</th>
                    <th>Reg Deleted At By</th>
                    <th>Reg Completed At</th>
                    <th>Reg Duration</th>
                </tr>

            </thead>
            <tbody>
                @foreach (var item in @Model.DelLabReqs)
                {
                <tr>
                    <td>@item.Value.BinId</td>
                    <td>@item.Value.LabRecNumber</td>
                    <td>@item.Value.CategoryName</td>
                    <td>@item.Value.RegCreatedBy</td>
                    <td>@item.Value.DeletedBy</td>
                    <td>@item.Value.RegAssignedTo</td>
                    <td>@item.Value.RegAssignedBy</td>
                    <td>@item.Value.RegCompletedBy</td>
                    <td>@item.Value.RegStartedAt</td>
                    <td>@item.Value.DeletedBy</td>
                    @if (@item.Value.RegCompletedAt.Year < 2000)
                    {
                        <td class="text-danger">Reg Not Completed</td>
                    }
                    else
                    {
                        <td>@item.Value.RegCompletedAt</td>
                    }

                    <td>@item.Value.RegDuration</td>
                </tr>
                }
            </tbody>
        </table>

    }
    <p class="p-1"></p>
</div>
<div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
    top: 0px; width: 100%; height: 100%; background-color: #666666; z-index: 30001;
    opacity: .8; filter: alpha(opacity=70);display:block">
    <p id="parBmUpScreen" name="parCategory" style="position: absolute; top: 30%; left: 45%; color: White;">
        Loading Reports please wait...<img src="~/Images/ajax-loading.gif">
    </p>
</div>

<script>
	$(document).ready(function () {
		$("#divLoading").hide();
		SessionExpireAlert(0);
		$(this).bind("contextmenu", function (e) {
			e.preventDefault();
		});
		$('#subcrbatch').click(function () {
			$("#divLoading").show();

            $('#fmDelLabReqsRep').submit();
		});
		$('#export').click(function () {

			$("<input type='hidden'/>")
				.attr("value", "exportRep")
				.attr("id", "export")
				.attr("name", "export")
				.prependTo("#fmUsgRep");
            $('#fmDelLabReqsRep').submit();
		});

	});</script>